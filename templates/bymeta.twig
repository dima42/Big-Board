{% extends 'two-col.twig' %}

{% block filters %}
<h4 class="nav-link">Jump to</h4>
<ul class="nav nav-pills flex-column">
    {% for meta in metas %}
    <li class="nav-item">
        <a class="nav-link" href="#meta-{{ meta.parent.id }}">{{ meta.parent.title }}</a>
    </li>
    {% endfor %}
</ul>
{% endblock %}

{% block content %}
{% from 'macros.twig' import puzzle_table %}

<h1>All puzzles by meta</h1>

{% for meta in metas %}
<section class="pt-2">
    <span class="anchor-target" id="meta-{{ meta.parentid }}"></span>
    <h2>
        <a href="/puzzle/{{ meta.parent.id }}">{{ meta.parent.title }}</a>
        <a class="add-puzzles-to-meta float-right" href="/add/{{ meta.parent.id }}">+ Add puzzles</a>
    </h2>
    {{ puzzle_table(meta.parent.id) }}
</section>
{% endfor %}
{% endblock %}

{% block scripts %}
<script>
$(function() {
    loadPuzzleData('/puzzles/bymeta');
});
</script>
{% endblock %}
