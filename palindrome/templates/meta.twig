{% extends 'loggedin.twig' %}

{% block body %}

{% for puzzle in puzzles if puzzle.META %}
    <H2><input class='metaTitle' size=100 name='puzttl_{{ puzzle.PUZID }}' value="{{ puzzle.PUZNME }}" style='background: transparent; border: none;'/ onchange='new_name(this, {{ puzzle.PUZID }})'></H2>
    {% if puzzle.PUZSTT == "solved" %}
        <H2 style='color:#FF6600'>This puzzle has been solved: {{ puzzle.PUZANS }}</H2>
    {% endif %}

    <table>
        <tr><td><a name='puzurllink_{{ puzzle.PUZID }}' href='{{ puzzle.PURL }}'>Meta URL</a></td><td><input size=40 name='puzurl_{{ puzzle.PUZID }}' value='{{ puzzle.PURL }}' onchange='new_link(this, {{ puzzle.PUZID }})' /></td></tr>
        <tr><td><a name='puzsprlink_{{ puzzle.PUZID }}' href='{{ puzzle.PUZSPR}}'>Google Doc</a></td><td><input size=40 name='puzspr_{{ puzzle.PUZID }}' value='{{ puzzle.PUZSPR}}' onchange='new_sprd(this, {{ puzzle.PUZID }})' /></td></tr>
        <tr><td>Notes</td><td><input size=40 name='puznts_{{ puzzle.PUZID }}' onchange='upd_notes(this, {{ puzzle.PUZID }})' value='{{ puzzle.PUZNOT }}'</></td></tr>
    </table>
{% else %}
    <P>This does not appear to be a metapuzzle. There are no puzzles that are part of it.</P>
{% endfor %}

<table border=0 cellspacing=0 cellpadding=4>
    <tr>
        <th>Puzzle</th>
        <th>Answer</th>
        <th>Let's Go!</th>
    </tr>

    {% for puzzle in puzzles if puzzle.META == 0 %}
        <tr class='{{ puzzle.PUZSTT }}'>
            <td><a href='{{ puzzle.PURL }}' target='_new'>{{ puzzle.PUZNME }}</a></td>
            <td>{{ puzzle.PUZANS }}</td>

            {# TODO: understand what PUZSPR is #}
            {% if puzzle.PUZSPR != "" %}
                <td><a href='{{ puzzle.PUZSPR }}' target='_new'><img src='sprd.png' width="20px" height="20px"></a></td>
            {% else %}
                <td></td>
            {% endif %}
        </tr>
    {% endfor %}
</table>

<p><a href='index.php?puzzle={{ meta_id }}'>View this metapuzzle as a regular puzzle</a></p>

<p><a href='/'>&laquo; Back to the Big Board</a></p>
{% endblock %}
